{% extends "base.html" %}

{% block title %}Ngân sách - Quản lý Chi tiêu AI{% endblock %}

{% block content %}
    <header class="main-header with-button">
        <div>
            <h1>Quản lý Ngân sách</h1>
            <p>Thiết lập, theo dõi giới hạn chi tiêu của bạn.</p>
        </div>
        <button class="btn btn-primary" id="openBudgetModal">
            <i class="fas fa-plus"></i> Tạo Ngân sách mới
        </button>
    </header>
    
    <section class="budget-list-container">
        <h2>Ngân sách đang hoạt động</h2>
        <div class="budget-grid" id="budgetGrid">
            <p>Đang tải dữ liệu...</p>
        </div> 
    </section>

    <div id="budgetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tạo Ngân sách mới</h2>
                <span class="modal-close" id="closeBudgetModal">&times;</span>
            </div>
            
            <form id="budgetForm" class="modal-body">
                <div class="form-group">
                    <label for="budgetName">Tên Ngân sách</label>
                    <input type="text" id="budgetName" placeholder="Ví dụ: Ngân sách Ăn uống" required>
                </div>
                
                <div class="form-group">
                    <label for="budgetAmount">Số tiền Giới hạn (VND)</label>
                    <input type="number" id="budgetAmount" placeholder="Ví dụ: 5000000" required>
                </div>
                
                <div class="form-group-inline">
                    <div class="form-group">
                        <label for="budgetStart">Từ ngày</label>
                        <input type="date" id="budgetStart" required>
                    </div>
                    <div class="form-group">
                        <label for="budgetEnd">Đến ngày</label>
                        <input type="date" id="budgetEnd" required>
                    </div>
                </div>
                
                    <div class="form-group">
                        <p style="font-weight: 600; margin-bottom: 8px; color: #333;">Áp dụng cho các Danh mục (Chi tiêu)</p>
                        
                        <div class="category-select-list" id="categoryCheckboxes">
                            </div>
                    </div>
            </form>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelBudgetModal">Hủy</button>
                <button class="btn btn-primary" type="submit" form="budgetForm">Lưu Ngân sách</button>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='assets/js/budgets.js') }}"></script>
{% endblock %}